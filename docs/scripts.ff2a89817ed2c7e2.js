!function(h,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):h["t-writer"]=a()}(this,function(){"use strict";var h=function(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")},a=function(){function i(s,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}return function(s,e,t){return e&&i(s.prototype,e),t&&i(s,t),s}}(),p={loop:!1,animateCursor:!0,blinkSpeed:400,typeSpeed:90,deleteSpeed:40,typeSpeedMin:65,typeSpeedMax:115,deleteSpeedMin:40,deleteSpeedMax:90,typeClass:"type-span",cursorClass:"cursor-span",typeColor:"black",cursorColor:"black"},f=function(){function i(s,e){h(this,i),this.el=s,this.speed=e,this.faded=!1,this.initialAssignment(),this.el.addEventListener("transitionend",this.logic.bind(this)),this.fade=this.fade.bind(this),this.fadeIn=this.fadeIn.bind(this)}return a(i,[{key:"initialAssignment",value:function(){Object.assign(this.el.style,{opacity:"1","transition-duration":"0.1s"})}},{key:"fade",value:function(){this.el.style.opacity="0",this.faded=!0}},{key:"fadeIn",value:function(){this.el.style.opacity="1",this.faded=!1}},{key:"logic",value:function(){this.faded?setTimeout(this.fadeIn,this.speed):setTimeout(this.fade,this.speed)}},{key:"start",value:function(){setTimeout(this.fade.bind(this),0)}}]),i}(),d=function(){function i(s,e){h(this,i),this.el=s,this.text="",this.queue=[],this.options=Object.assign({},p,e),this.createTextEl()}return a(i,[{key:"type",value:function(e){return this.queue.push({type:"type",content:e}),this}},{key:"strings",value:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),u=1;u<r;u++)n[u-1]=arguments[u];return n.forEach(function(o,l){t.queue.push({type:"type",content:o}),e&&t.queue.push({type:"pause",time:e}),l!==n.length-1&&t.queue.push({type:"deleteChars",count:o.length})}),this}},{key:"remove",value:function(e){return this.queue.push({type:"deleteChars",count:e}),this}},{key:"clear",value:function(){return this.queue.push({type:"clear"}),this}},{key:"clearText",value:function(){return this.text="",this.render(),this}},{key:"queueClearText",value:function(){return this.queue.push({type:"clearText"}),this}},{key:"clearQueue",value:function(){return this.queue=[],this.text="",render(),this}},{key:"rest",value:function(e){return this.queue.push({type:"pause",time:e}),this}},{key:"changeOps",value:function(e){return this.queue.push({type:"changeOps",options:e}),this}},{key:"then",value:function(e){return this.queue.push({type:"callback",cb:e}),this}},{key:"removeCursor",value:function(){return this.queue.push({type:"deleteCursor"}),this}},{key:"addCursor",value:function(){return this.queue.push({type:"createCursor"}),this}},{key:"changeTypeColor",value:function(e){return this.queue.push({type:"typeColor",color:e}),this}},{key:"changeCursorColor",value:function(e){return this.queue.push({type:"cursorColor",color:e}),this}},{key:"changeTypeClass",value:function(e){return this.queue.push({type:"typeClass",className:e}),this}},{key:"changeCursorClass",value:function(e){return this.queue.push({type:"cursorClass",className:e}),this}},{key:"start",value:function(){var e=this;this.running||(this.cursorEl||this.createCursorEl(),this.running=!0,this.deleteAll().then(function(t){return e.loop(0)}))}},{key:"add",value:function(e){var t=this,r=0;return this.timestamp=Date.now(),new Promise(function(n,u){requestAnimationFrame(function l(){if(r===e.length)return n();var c=Date.now();c-t.timestamp>=t.getTypeSpeed()&&(t.addChar(e[r]),t.timestamp=c,r++),requestAnimationFrame(l)})})}},{key:"delete",value:function(e){var t=this;return this.timestamp=Date.now(),new Promise(function(r,n){requestAnimationFrame(function o(){if(0===e)return r();var l=Date.now();l-t.timestamp>=t.getDeleteSpeed()&&(t.deleteChar(),t.timestamp=l,e--),requestAnimationFrame(o)})})}},{key:"deleteAll",value:function(){return this.delete(this.text.length)}},{key:"pause",value:function(e){return new Promise(function(t,r){setTimeout(t,e)})}},{key:"callback",value:function(e){return new Promise(function(t,r){e(),t()})}},{key:"deleteCursor",value:function(){var e=this;return new Promise(function(t,r){e.removeCursorEl(),t()})}},{key:"createCursor",value:function(){var e=this;return new Promise(function(t,r){e.createCursorEl(),t()})}},{key:"clearTextAction",value:function(){var e=this;return new Promise(function(t,r){e.clearText(),t()})}},{key:"changeOpsAction",value:function(e){var t=this;return new Promise(function(r,n){t.options=Object.assign(t.options,e),r()})}},{key:"typeColor",value:function(e){var t=this;return new Promise(function(r,n){t.textEl.style.color=e,r()})}},{key:"cursorColor",value:function(e){var t=this;return new Promise(function(r,n){t.cursorEl.style.color=e,r()})}},{key:"typeClass",value:function(e){var t=this;return new Promise(function(r,n){t.textEl.className=e,r()})}},{key:"cursorClass",value:function(e){var t=this;return new Promise(function(r,n){t.cursorEl.className=e,r()})}},{key:"deleteChar",value:function(){this.text=this.text.slice(0,-1),this.render()}},{key:"addChar",value:function(e){this.text+=e,this.render()}},{key:"getTypeSpeed",value:function(){var e=this.options.typeSpeed;if("number"==typeof e)return e;var t=this.options.typeSpeedMax,r=this.options.typeSpeedMin;return Math.floor(Math.random()*(t-r))+r}},{key:"getDeleteSpeed",value:function(){var e=this.options.deleteSpeed;if("number"==typeof e)return e;var t=this.options.deleteSpeedMax,r=this.options.deleteSpeedMin;return Math.floor(Math.random()*(t-r))+r}},{key:"step",value:function(e){var t=this.queue[e];switch(t.type){case"type":return this.add(t.content);case"deleteChars":return this.delete(t.count);case"clear":return this.deleteAll();case"pause":return this.pause(t.time);case"callback":return this.callback(t.cb);case"deleteCursor":return this.deleteCursor();case"createCursor":return this.createCursor();case"clearText":return this.clearTextAction();case"changeOps":return this.changeOpsAction(t.options);case"typeColor":return this.typeColor(t.color);case"cursorColor":return this.cursorColor(t.color);case"typeClass":return this.typeClass(t.className);case"cursorClass":return this.cursorClass(t.className)}}},{key:"loop",value:function(e){var t=this;if(e===this.queue.length)return this.running=!1,void(this.options.loop&&this.start());this.step(e).then(function(r){t.loop(e+1)})}},{key:"createCursorEl",value:function(){"String"!=typeof this.options.animateCursor&&(this.cursorEl=document.createElement("span"),this.cursorEl.innerHTML="|",this.cursorEl.style.color=this.options.cursorColor,this.cursorEl.classList.add(this.options.cursorClass),this.el.appendChild(this.cursorEl),this.options.animateCursor&&(this.cursor=new f(this.cursorEl,this.options.blinkSpeed),this.cursor.start()))}},{key:"removeCursorEl",value:function(){this.el.removeChild(this.cursorEl),this.cursorEl=null}},{key:"createTextEl",value:function(){this.textEl=document.createElement("span"),this.textEl.classList.add(this.options.typeClass),this.textEl.style.color=this.options.typeColor,this.el.appendChild(this.textEl)}},{key:"render",value:function(){this.textEl.innerHTML=this.text}}]),i}();return d});